{"file":"C:\\Users\\dinuk\\Desktop\\My Docs\\Projects\\Tradeasy\\Tradeasy-Backend\\discount_management\\src\\app.controller.spec.ts","mappings":"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","names":[],"sources":["C:\\Users\\dinuk\\Desktop\\My Docs\\Projects\\Tradeasy\\Tradeasy-Backend\\discount_management\\src\\app.controller.spec.ts"],"sourcesContent":["import { Test, TestingModule } from '@nestjs/testing';\r\nimport { AppController } from './app.controller';\r\nimport { AppService } from './app.service';\r\nimport { DiscountsDTO } from './dto/discountsDTO';\r\nimport { Discounts } from './discount.entity';\r\n\r\ndescribe('AppController', () => {\r\n  let appController: AppController;\r\n  let appService: AppService;\r\n\r\n  beforeEach(async () => {\r\n    const app: TestingModule = await Test.createTestingModule({\r\n      controllers: [AppController],\r\n      providers: [\r\n        {\r\n          provide: AppService,\r\n          useValue: {\r\n            createDiscount: jest.fn(),\r\n            searchAllDiscounts: jest.fn(),\r\n            getAllDiscounts: jest.fn(),\r\n            getDiscountById: jest.fn(),\r\n            deleteDiscount: jest.fn(),\r\n          },\r\n        },\r\n      ],\r\n    }).compile();\r\n\r\n    appController = app.get<AppController>(AppController);\r\n    appService = app.get<AppService>(AppService);\r\n  });\r\n\r\n  describe('createDiscount', () => {\r\n    it('should create a discount', async () => {\r\n      const discountsDTO: DiscountsDTO = {\r\n        productId: '1',\r\n        productName: 'testProduct',\r\n        sellingPrice: 1000.25,\r\n        discountRate: 0.05,\r\n        startDate: '2024-03-05',\r\n        endDate: '2025-09-25',\r\n      };\r\n      const result = new Discounts();\r\n      jest.spyOn(appService, 'createDiscount').mockResolvedValue(result);\r\n\r\n      expect(await appController.createDiscount(discountsDTO)).toBe(result);\r\n    });\r\n  });\r\n\r\n  describe('searchAllDiscounts', () => {\r\n    it('should search all discounts', async () => {\r\n      const query = {};\r\n      const result = [new Discounts()];\r\n      jest.spyOn(appService, 'searchAllDiscounts').mockResolvedValue(result);\r\n\r\n      expect(await appController.searchAllDiscounts(query)).toBe(result);\r\n    });\r\n  });\r\n\r\n  describe('getAllDiscounts', () => {\r\n    it('should return all discounts', async () => {\r\n      const result = [new Discounts()];\r\n      jest.spyOn(appService, 'getAllDiscounts').mockResolvedValue(result);\r\n\r\n      expect(await appController.getAllDiscounts()).toBe(result);\r\n    });\r\n  });\r\n\r\n  describe('getDiscountById', () => {\r\n    it('should return a discount by id', async () => {\r\n      const id = 1;\r\n      const result = new Discounts();\r\n      jest.spyOn(appService, 'getDiscountById').mockResolvedValue(result);\r\n\r\n      expect(await appController.getDiscountById(id)).toBe(result);\r\n    });\r\n  });\r\n\r\n  describe('deleteDiscount', () => {\r\n    it('should delete a discount', async () => {\r\n      const id = 1;\r\n      const result = 'Successfully Deleted';\r\n      jest.spyOn(appService, 'deleteDiscount').mockResolvedValue(result);\r\n\r\n      expect(await appController.deleteDiscount(id)).toBe(result);\r\n    });\r\n  });\r\n});\r\n"],"version":3}